<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <style>
        body { background:#000; color:#0ff; font-family:Orbitron; padding:20px; }
        input, textarea { width:100%; margin:5px 0; padding:10px; background:#111; color:#0ff; border:1px solid #0ff; }
        button { padding:12px 20px; margin-top:10px; background:#0ff; color:#000; cursor:pointer; font-weight:bold; }
    </style>
</head>

<body>

<h1>ADD PLANET</h1>

<label>–ò–º–µ –Ω–∞ –ø–ª–∞–Ω–µ—Ç–∞:</label>
<input id="planetName">

<label>–ì–∞–ª–∞–∫—Ç–∏–∫–∞:</label>
<input id="galaxy">

<label>–°–∏—Å—Ç–µ–º–∞:</label>
<input id="system">

<label>–ë–∏–æ–º:</label>
<input id="biome">

<label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
<textarea id="description"></textarea>

<button onclick="savePlanet()">SAVE PLANET</button>

<script>

// URL –ö–™–ú JSON –§–ê–ô–õ–ê –í GITHUB RAW
const planetsURL = "https://raw.githubusercontent.com/Markov69/NO-MAN-S-SKY---galactic-logbook/main/planets.json";

// API URL –∑–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ñ–∞–π–ª–∞ (GitHub API)
const updateURL = "https://api.github.com/repos/Markov69/NO-MAN-S-SKY---galactic-logbook/contents/planets.json";

// ‚ùó –¢–£–ö –í–™–í–ï–ñ–î–ê–® –õ–ò–ß–ù–ò–Ø–¢ –°–ò GITHUB TOKEN
// (—â–µ —Ç–∏ –∫–∞–∂–∞ –∫–∞–∫ –¥–∞ –≥–æ –≤–∑–µ–º–µ—à)
const TOKEN = "PUT-YOUR-GITHUB-TOKEN-HERE";

async function savePlanet() {
    const name = document.getElementById("planetName").value;
    const galaxy = document.getElementById("galaxy").value;
    const system = document.getElementById("system").value;
    const biome = document.getElementById("biome").value;
    const description = document.getElementById("description").value;

    if (!name) { alert("–í—ä–≤–µ–¥–∏ –∏–º–µ!"); return; }

    // 1) –í–ó–ò–ú–ê–ú–ï –°–¢–ê–†–ò–¢–ï –î–ê–ù–ù–ò
    let planets = await fetch(planetsURL).then(r => r.json());

    // 2) –î–û–ë–ê–í–Ø–ú–ï –ù–û–í–ê–¢–ê –ü–õ–ê–ù–ï–¢–ê
    planets.push({
        name,
        galaxy,
        system,
        biome,
        description
    });

    // 3) –í–ó–ò–ú–ê–ú–ï SHA –ù–ê –§–ê–ô–õ–ê
    const getInfo = await fetch(updateURL).then(r => r.json());
    const sha = getInfo.sha;

    // 4) –ö–ê–ß–í–ê–ú–ï –ê–ö–¢–£–ê–õ–ò–ó–ò–†–ê–ù–ò–Ø JSON –í GITHUB
    await fetch(updateURL, {
        method: "PUT",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `token ${TOKEN}`
        },
        body: JSON.stringify({
            message: "update planets",
            content: btoa(JSON.stringify(planets, null, 2)),
            sha: sha
        })
    });

    alert("–ü–ª–∞–Ω–µ—Ç–∞—Ç–∞ –µ –∑–∞–ø–∏—Å–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ! üî•üöÄ");
}

</script>

</body>
</html>
