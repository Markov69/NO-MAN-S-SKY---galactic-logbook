<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>Planet Archive</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
    background: #02060d;
    color: #bde8ff;
    font-family: Orbitron, sans-serif;
    padding: 20px;
}

h1 {
    text-align: center;
    color: #5dd8ff;
    margin-bottom: 30px;
    text-shadow: 0 0 12px #3cbcff;
}

.card {
    background: rgba(11,22,40,0.6);
    border: 1px solid #49c7ff;
    padding: 16px;
    margin: 10px 0;
    border-radius: 10px;
    cursor: pointer;
}
.card:hover {
    background: rgba(20,40,70,0.8);
    box-shadow: 0 0 12px #49c7ff;
}

.viewer {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    color: #dff7ff;
    padding: 20px;
    overflow-y: auto;
}
.close-btn {
    cursor: pointer;
    font-size: 22px;
    float:right;
    margin:10px;
}
</style>
</head>

<body>

<h1>ü™ê PLANET ARCHIVE</h1>

<div id="list"></div>

<script type="module">
import { listBlobs, readBlob } from "./storage.js";

async function loadPlanets() {
    const files = await listBlobs("planets/");
    const html = [];

    for (const fileName of files) {
        const json = await readBlob(fileName);
        const p = JSON.parse(json);

        html.push(`
        <div class="card" onclick="openPlanet('${fileName}')">
            <b>${p.name}</b> ‚Äî ${p.biome}
        </div>
        `);
    }

    document.getElementById("list").innerHTML = html.join("");
}

window.openPlanet = async function(fileName) {
    const json = await readBlob(fileName);
    const p = JSON.parse(json);

    const div = document.createElement("div");
    div.className = "viewer";

    div.innerHTML = `
        <div class="close-btn" onclick="this.parentElement.remove()">‚úï</div>
        
        <h2>${p.name}</h2>

        <h3>–û—Å–Ω–æ–≤–Ω–∞ —Å–Ω–∏–º–∫–∞:</h3>
        <img src="${p.planetImage}" style="width:300px;border-radius:8px">

        <h3>–ê–¥–º–∏—Ä–∞–ª:</h3>
        <img src="${p.admiralImage}" style="width:220px;border-radius:8px">

        <h3>–û–ø–∏—Å–∞–Ω–∏–µ:</h3>
        <p>${p.description}</p>

        <h3>–î–∞–Ω–Ω–∏:</h3>
        <p>–ì–∞–ª–∞–∫—Ç–∏–∫–∞: ${p.galaxy}</p>
        <p>–°–∏—Å—Ç–µ–º–∞: ${p.system}</p>
        <p>–ë–∏–æ–º: ${p.biome}</p>
        <p>–í—Ä–µ–º–µ: ${p.weather}</p>
        <p>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${p.temperature}</p>
        <p>–†–∞–¥–∏–∞—Ü–∏—è: ${p.radiation}</p>
        <p>–¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç: ${p.toxicity}</p>

        <h3>–ì–∞–ª–µ—Ä–∏—è:</h3>
        ${p.gallery.map(g => `<img src="${g}" style="width:160px;margin:6px;border-radius:6px">`).join("")}
    `;

    document.body.appendChild(div);
};

loadPlanets();
</script>

</body>
</html>
